{% extends 'base.html' %}
{% load static %}
{% block content %}
<style type="text/css">{{ holiday_css|safe }}
{{ now_css|safe }}</style>
  <h1>
    Year {{ current_year }}, in the Era of {{ era_name }}
  </h1>
  <div style="display: flex; flex-direction: row; justify-content: space-between;">
    <input type="button" value="Year {{ previous_year }}" onclick="location.href='{% url 'news:calender_era' era previous_year %}';" />
    <input type="button" value="Now" onclick="location.href='{% url 'news:calender' %}';" />
    <input type="button" value="Year {{ next_year }}" onclick="location.href='{% url 'news:calender_era' era next_year %}';" />
  </div>
  <div class="calender">
    {% for month in year %}
    <table class="calender_table">
      <tr>
        <td colspan="7">
          <div class="center text-lg bold">
            {{ month.name }}
          </div>
        </td>
      </tr>
      <tr>
        {% for abbrev in 'MTWHFSU'|make_list %}
          <th> {{ abbrev }} </th>
        {% endfor %}
      </tr>
      {% for week in month.days %}
        <tr>
          {% for day in week %}
            {% if day|is_int %}
              {% if month.name == cipher.Month and day == cipher.Day and current_year == cipher.Year %}
                <td id="{{ month.name }}{{ day }}" style="background-color: dodgerblue;">
                  {{ day }}
                </td>
              {% elif month.name == cyneric.Month and day == cyneric.Day and current_year == cyneric.Year %}
                <td id="{{ month.name }}{{ day }}" style="background-color: violet;">
                  {{ day }}
                </td>
              {% elif month.name == dragon.Month and day == dragon.Day and current_year == dragon.Year %}
                <td id="{{ month.name }}{{ day }}" style="background-color: aquamarine;">
                  {{ day }}
                </td>
              {% else %}
                <td id="{{ month.name }}{{ day }}">
                  {{ day }}
                </td>
              {% endif %}
            {% else %}
              {% if month.name == cipher.Month and day.number == cipher.Day and current_year == cipher.Year %}
                <td id="{{ month.name }}{{ day.number }}" style="background-color: dodgerblue;">
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% elif month.name == cyneric.Month and day == cyneric.Day and current_year == cyneric.Year %}
                <td id="{{ month.name }}{{ day.number }}" style="background-color: violet;">
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% elif month.name == dragon.Month and day == dragon.Day and current_year == dragon.Year %}
                <td id="{{ month.name }}{{ day.number }}" style="background-color: aquamarine;">
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% else %}
                <td id="{{ month.name }}{{ day.number }}">
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% endif %}
            {% endif %}
          {% endfor %}
        </tr>
      {% endfor %}
    </table>
    {% endfor %}
  </div>

  <div style="display: flex; flex-direction: row; justify-content: space-between; margin-bottom: 60px;">
    <div>
      <a href="{% url 'news:article_latest' %}" style="background-color: darkblue; color: white; padding: 10px;">
        See latest articles here
      </a>
    </div>
    {% if is_admin %}
      <div>
        <a href="{% url 'news:create_article' %}" style="background-color: darkblue; color: white; padding: 10px;">
          Add news article
        </a>
      </div>
    {% endif %}
  </div>
{% endblock %}

{% extends 'base.html' %}
{% load static %}
{% block content %}
  <h1>
    Year {{ current_year }}, in the Era of {{ era_name }}
  </h1>
  <div style="display: flex; flex-direction: row; justify-content: space-between;">
    <input type="button" value="Year {{ previous_year }}" onclick="location.href='{% url 'news:calender_era' era previous_year %}';" />
    <input type="button" value="Now" onclick="location.href='{% url 'news:calender' %}';" />
    <input type="button" value="Year {{ next_year }}" onclick="location.href='{% url 'news:calender_era' era next_year %}';" />
  </div>
  <div class="calender">
    {% for month in year %}
    <table class="calender_table">
      <tr>
        <td colspan="7">
          <div class="center text-lg bold">
            {{ month.name }}
          </div>
        </td>
      </tr>
      <tr>
        {% for abbrev in 'MTWHFSU'|make_list %}
          <th> {{ abbrev }} </th>
        {% endfor %}
      </tr>
      {% for week in month.days %}
        <tr>
          {% for day in week %}
            {% if day|is_int %}
              {% if month.name == today.Month and day == today.Day and current_year == today.Year %}
                <td style="background-color: dodgerblue;">
                  {{ day }}
                </td>
              {% else %}
                <td>
                  {{ day }}
                </td>
              {% endif %}
            {% else %}
              {% if month.name == today.Month and day.number == today.Day and current_year == today.Year %}
                <td style="background-color: dodgerblue;">
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% else %}
                <td>
                  <form action="{% url 'news:article_list' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="links" value="{{ day.links }}">
                    <button class="calender_link" type="submit" value="{{ day.number }}">
                      {{ day.number }}
                    </button>
                  </form>
                </td>
              {% endif %}
            {% endif %}
          {% endfor %}
        </tr>
      {% endfor %}
    </table>
    {% endfor %}
  </div>

  {% if is_admin %}
    <!-- Add News Article -->
    <input type="button" onclick="location.href='{% url 'news:create_article' %}';" value="Add a News Article" />
  {% endif %}
{% endblock %}
